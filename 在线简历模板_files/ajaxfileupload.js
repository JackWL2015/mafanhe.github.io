jQuery.extend({createUploadIframe:function(b,d){var c="jUploadFrame"+b;var a='<iframe id="'+c+'" name="'+c+'" style="position:absolute; top:-9999px; left:-9999px"';if(window.ActiveXObject){if(typeof d=="boolean"){a+=' src="javascript:false"'}else{if(typeof d=="string"){a+=' src="'+d+'"'}}}a+=" />";jQuery(a).appendTo(document.body);return jQuery("#"+c).get(0)},createUploadForm:function(a,j,d){var h="jUploadForm"+a;var c="jUploadFile"+a;var b=jQuery('<form  action="" method="POST" name="'+h+'" id="'+h+'" enctype="multipart/form-data"></form>');if(d){for(var e in d){jQuery('<input type="hidden" name="'+e+'" value="'+d[e]+'" />').appendTo(b)}}var f=jQuery("#"+j);var g=jQuery(f).clone();jQuery(f).attr("id",c);jQuery(f).before(g);jQuery(f).appendTo(b);jQuery(b).css("position","absolute");jQuery(b).css("top","-1200px");jQuery(b).css("left","-1200px");jQuery(b).appendTo("body");return b},ajaxFileUpload:function(i){i=jQuery.extend({},jQuery.ajaxSettings,i);var j=new Date().getTime();var k=jQuery.createUploadForm(j,i.fileElementId,(typeof(i.data)=="undefined"?false:i.data));var g=jQuery.createUploadIframe(j,i.secureuri);var f="jUploadFrame"+j;var h="jUploadForm"+j;if(i.global&&!jQuery.active++){jQuery.event.trigger("ajaxStart")}var a=false;var c={};if(i.global){jQuery.event.trigger("ajaxSend",[c,i])}var b=function(e){var o=document.getElementById(f);try{if(o.contentWindow){c.responseText=o.contentWindow.document.body?o.contentWindow.document.body.innerHTML:null;c.responseXML=o.contentWindow.document.XMLDocument?o.contentWindow.document.XMLDocument:o.contentWindow.document}else{if(o.contentDocument){c.responseText=o.contentDocument.document.body?o.contentDocument.document.body.innerHTML:null;c.responseXML=o.contentDocument.document.XMLDocument?o.contentDocument.document.XMLDocument:o.contentDocument.document}}}catch(n){jQuery.handleError(i,c,null,n)}if(c||e=="timeout"){a=true;var l;try{l=e!="timeout"?"success":"error";if(l!="error"){var m=jQuery.uploadHttpData(c,i.dataType);if(i.success){i.success(m,l)}if(i.global){jQuery.event.trigger("ajaxSuccess",[c,i])}}else{jQuery.handleError(i,c,l)}}catch(n){l="error";jQuery.handleError(i,c,l,n)}if(i.global){jQuery.event.trigger("ajaxComplete",[c,i])}if(i.global&&!--jQuery.active){jQuery.event.trigger("ajaxStop")}if(i.complete){i.complete(c,l)}jQuery(o).unbind();setTimeout(function(){try{jQuery(o).remove();jQuery(k).remove()}catch(p){jQuery.handleError(i,c,null,p)}},100);c=null}};if(i.timeout>0){setTimeout(function(){if(!a){b("timeout")}},i.timeout)}try{var k=jQuery("#"+h);jQuery(k).attr("action",i.url);jQuery(k).attr("method","POST");jQuery(k).attr("target",f);if(k.encoding){jQuery(k).attr("encoding","multipart/form-data")}else{jQuery(k).attr("enctype","multipart/form-data")}jQuery(k).submit()}catch(d){jQuery.handleError(i,c,null,d)}jQuery("#"+f).load(b);return{abort:function(){}}},handleError:function(d,b,c,a){if(d.error){d.error.call(d.context||d,b,c,a)}if(d.global){(d.context?jQuery(d.context):jQuery.event).trigger("ajaxError",[b,d,a])}},uploadHttpData:function(r,type){var data=!type;data=type=="xml"||data?r.responseXML:r.responseText;if(type=="script"){jQuery.globalEval(data)}if(type=="json"){eval("data = "+data)}if(type=="html"){jQuery("<div>").html(data).evalScripts()}return data}});
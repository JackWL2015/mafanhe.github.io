$(document).ready(function(){$(".cart").mousemove(function(){$(this).find(".cartText").fadeIn(0);$(this).find(".cartCont").fadeIn(0);$(this).find(".cartNum").addClass("huanBg")});$(".cart").mouseleave(function(){$(this).find(".cartText").fadeOut(0);$(this).find(".cartCont").fadeOut(0);$(this).find(".cartNum").removeClass("huanBg")});$(".div_help_user,.m-touxiang").mouseover(function(){if(getCookie("memberName")||getCookie("memberEmail")){$(".m-top_user").show();$(".ul_top_user").show()}});$(".div_help_user,.m-touxiang").mouseleave(function(){$(".ul_top_user").hide();$(".m-top_user").hide()});$("#close_window").click(function(){$("#window_dialog").hide()});$(".erji").hover(function(a){$(this).children(".m-erjinav").stop().fadeIn(500)},function(){setTimeout(function(){$(this).children(".m-erjinav").stop().hide()},800)});$(".m-erjinav").hover(function(a){$(this).show()},function(){$(this).stop().fadeOut(500)});$(".erji").siblings().hover(function(a){$(".m-erjinav").stop().fadeOut(500)},function(){})});function cartSize(){var a=getCookie("cartSize");if(!a){a=getCartSize()}if(a&&a>0){$("#cart").addClass("cur")}else{$("#cart").removeClass("cur")}}function getCartSize(){var a=0;$.ajax({async:false,url:wbdcnf.base+"/cart/size.jhtml",cache:false,type:"GET",success:function(b){a=b}});return a}function showBg(){var a=$("body").height();var b=$("body").width();$("#fullbg").css({height:a,width:b,display:"block"});$("#dialog").show()}function closeBg(){$("#fullbg,#dialog").hide()}function ShowPre(c){var g=this;this.box=$("#"+c.box);this.btnP=$("#"+c.Pre);this.btnN=$("#"+c.Next);this.v=c.v||1;this.c=0;var h="li";this.loop=c.loop||false;if(this.loop){this.li=this.box.find(h);this.box.append(this.li.eq(0).clone(true))}this.li=this.box.find(h);this.l=this.li.length;if(this.l<=this.v){this.btnP.hide();this.btnN.hide()}this.deInit=true;this.w=this.li.outerWidth(true);this.box.width(this.w*this.l);this.maxL=this.l-this.v;this.s=c.s||1;if(this.s>1){this.w=this.v*this.w;this.maxL=Math.floor(this.l/this.v);this.box.width(this.w*(this.maxL+1));var f=(this.maxL+1)*this.v-this.l;var d="";for(var j=0;j<f;j++){d+="<li class='addBox'><div class='photo'></div><div class='text'></div></li>"}this.box.append(d)}this.numIco=null;if(c.numIco){this.numIco=$("#"+c.numIco);var b="";numL=this.loop?(this.l-1):this.l;for(var e=0;e<numL;e++){b+="<a href='javascript:void(0);'>"+e+"</a>"}this.numIcoLi=this.numIco.find("a");this.numIcoLi.bind("click",function(){if(g.c==$(this).html()){return false}g.c=$(this).html();g.c=$(this).attr("data");g.move()})}this.bigBox=null;this.loadNumBox=null;if(c.loadNumBox){this.loadNumBox=$("#"+c.loadNumBox)}this.allNumBox=null;if(c.loadNumBox){this.allNumBox=$("#"+c.allNumBox);if(c.bBox){var a=this.l<10?("0"+this.l):this.l}else{var a=this.maxL<10?("0"+(this.maxL+1)):(this.maxL+1)}this.allNumBox.html(a)}if(c.bBox){this.bigBox=$("#"+c.bBox);this.li.each(function(k){$(this).attr("num",k);var i=(k+1<10)?("0"+(k+1)):k+1;$(this).find(".text").html(i)});this.loadNum=0;this.li.bind("click",function(){if(g.loadNum==$(this).attr("num")){return false}var i=null;if(g.loadNum>$(this).attr("num")){i="pre"}g.loadNum=$(this).attr("num");g.loadImg(i)});g.loadImg();if(c.bNext){g.bNext=$("#"+c.bNext);g.bNext.bind("click",function(){g.loadNum<g.l-1?g.loadNum++:g.loadNum=0;g.loadImg()})}if(c.bPre){g.bPre=$("#"+c.bPre);g.bPre.bind("click",function(){g.loadNum>0?g.loadNum--:g.loadNum=g.l-1;g.loadImg("pre")})}}if(this.loop){this.btnP.bind("click",function(){if(g.c<=0){g.c=g.l-1;g.box.css({left:-g.c*g.w})}g.c--;g.move(1)});this.btnN.bind("click",function(){if(g.c>=(g.l-1)){g.box.css({left:0});g.c=0}g.c++;g.move(1)})}else{this.btnP.bind("click",function(){g.c>0?g.c--:g.c=g.maxL;g.move(1)});this.btnN.bind("click",function(){g.c<g.maxL?g.c++:g.c=0;g.move(1)})}g.timer=null;if(c.auto){g.box.bind("mouseover",function(){clearInterval(g.timer)});g.box.bind("mouseleave",function(){g.autoPlay()});g.autoPlay()}this.move()}ShowPre.prototype={move:function(e){var c=this;var d=this.c*this.w;if(e&&c.timer){clearInterval(c.timer)}if(c.numIco){c.numIcoLi.removeClass("on");var a=c.c;if(c.loop&&(c.c==(this.l-1))){a=0}c.numIcoLi.eq(a).addClass("on")}this.box.stop();this.box.animate({left:-d},function(){if(e&&c.auto){c.autoPlay()}if(c.loop&&c.c==c.maxL){c.c=0;c.box.css({left:0})}});if(c.bigBox){return false}if(c.loadNumBox){var b=parseInt(c.c)+1;b=b<10?"0"+b:b;c.loadNumBox.html(b)}},loadImg:function(g){var e=this;var c=this.li.eq(e.loadNum).attr("bsrc"),i=null,h=null,f=null;if(e.li.eq(e.loadNum).attr("data-h")){var i=$("#bigT h3");$("#bigT").hide();i.html("")}if(e.li.eq(e.loadNum).attr("data-m")){var h=$("#bigT h4");$("#bigT").hide();h.html("")}if(e.li.eq(e.loadNum).attr("data-text")){var f=$("#bigText");f.html("").hide()}var d=new Image();$(d).hide();if(e.deInit){var b=0;e.deInit=false;e.bigBox.html("<div class='loading'></div><div class='loading'></div>")}else{if(g!="pre"){var b=-1230;e.bigBox.append("<div class='loading'></div>")}else{var b=1230;e.bigBox.find(".loading").before("<div class='loading'></div>");e.bigBox.css({"margin-left":-1230});b=0}}e.bigBox.animate({"margin-left":b},function(){$(d).bind("load",function(){if(g!="pre"){var k=1,j=0}else{var k=0,j=1}e.bigBox.find(".loading").eq(k).html(d);e.bigBox.find(".loading").eq(j).remove();e.bigBox.css({"margin-left":0});$(this).fadeIn(200,function(){if(i){$("#bigT").fadeIn();i.html(e.li.eq(e.loadNum).attr("data-h"))}if(h){$("#bigT").fadeIn();h.html(e.li.eq(e.loadNum).attr("data-m"))}if(f){f.html(e.li.eq(e.loadNum).attr("data-text")).fadeIn()}})});d.src=c});e.li.removeClass("on");e.li.eq(e.loadNum).addClass("on");if(e.loadNumBox){var a=parseInt(e.loadNum)+1;a=a<10?"0"+a:a;e.loadNumBox.html(a)}},autoPlay:function(){var a=this;a.timer=setInterval(function(){a.c<a.maxL?a.c++:a.c=0;a.move()},4000)}};function gotop(){var b='<div class="gotop"></div>';$("body").append(b);$(".gotop").click(function(){$("html, body").animate({scrollTop:0},700)});var a=200;$(window).scroll(function(){var c=$(window).scrollTop();if(c>a){$(".gotop").fadeIn(100)}else{$(".gotop").fadeOut(100)}})}function area(){var a,c,b;$("#province").change(function(){a=$(this).val();next(a,"#city")});$("#city").change(function(){c=$(this).val();next(c,"#area")})}function next(b,a){if(b==null||isNaN(b)||b==""){$("#city").empty().append('<option value="">地级市</option>');$("#area").empty().append('<option value="">市、县级市、县</option>');return}$.get(wbdcnf.base+"/area/next.jhtml",{id:b},function(c){$(a).empty();if(a=="#city"){$("#city").empty().append('<option value="">地级市</option>')}else{$("#area").empty().append('<option value="">市、县级市、县</option>')}if(c==null||c.length==0){$(a).hide()}else{$(a).show()}$(c).each(function(d){$(a).append('<option value="'+c[d].id+'">'+c[d].name+"</option>");if(d==1&&a=="#city"){next(c[d].id,"#area")}})})}function loginMsg(a,b){if(!a){b=getCookie("memberHead");a=getCookie("memberName");userEmail=getCookie("memberEmail")}if(a!=null||userEmail!=null){if(a==null||a==""){a="我的五百丁"}$("#login").hide();$("#register").hide();$("#login-register").hide();$("#userName").text(a).show();$("#userHead").show().find("img").attr("src",b);$("#window_dialog").remove();if(next_url){location.href=next_url}if(add_login_success){loginSuccess()}$("#user_logout").show().click(function(){loginOut()})}else{$("#login").show()}}function loginSuccess(){}var logoutrefresh=false;function loginOut(){$.get(wbdcnf.base+"/logout.jhtml",function(b){if(b.type=="success"){$("#userHead").hide();$("#userName").hide();$(".ul_top_user").hide();$(".m-top_user").hide();$("#login").show();$("#register").show();$("#login-register").show();cartSize();var c=$(b.content);c.each(function(d,e){$.getScript(e.src,function(){})});if(logoutrefresh){location.reload()}}else{var a=0;var c=$(b.content);if(b.content!=""&&c.length>0){c.each(function(d,e){$.getScript(e.src,function(){if(++a==c.length){location.href=wbdcnf.base+"/"}})})}else{location.href=wbdcnf.base+"/"}}})}var next_url=null;var add_login_success=false;function isLogin(c,a){if($.checkLogin()){return true}else{if(c){next_url=c}if(a){add_login_success=a}var b=$("body").height();var d=$("body").width();$('<div id="window_dialog"></div>').css({height:b,width:d}).appendTo("body").load(wbdcnf.base+"/login/window.jhtml");return false}}function browser(){var b='<div style="position:fixed;top:100px;right:-604px;z-index:10001;width:604px;height:373px;">			<img alt="兼容提示" src="./resources/500d/images/browser.png">			<a style="display:block;width:20px;height:20px;position:absolute;top:25px;right:22px;cursor:pointer;"></a>		</div>';if($.browser.msie){if($.browser.version<=8){var a=$(b);a.click(function(){a.animate({right:-604},800)});$("body").append(a);a.animate({right:0},1000,function(){setTimeout(function(){a.animate({right:-604},800)},20*1000)})}}}function checkSize(c,d,e){if(!e){e=3}var b=e*1024*1024;if(c&&c.files&&c.files[0]&&c.files[0].size){var a=c.files[0].size;if(a>b){if(d){alert("上传图片文件过大，请上传小于"+e+"M的文件！")}return false}}return true};